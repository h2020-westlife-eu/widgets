<html>
<head>
  <title>Protein Viewer</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
  test pv
<div id=viewer ></div>
</body>
<script type='text/javascript' src='https://cdn.rawgit.com/biasmv/pv/master/bio-pv.min.js'></script>
<script type='text/javascript'>
// override the default options with something less restrictive.
var options = {
  width: 600,
  height: 600,
  antialias: true,
  quality : 'medium'
  // background='black', outlineColor='white'
};
// insert the viewer under the Dom element with id 'gl'.
var viewer = pv.Viewer(document.getElementById('viewer'), options);
</script>
<script type='text/javascript'>

// given the contents of a PDB file, show the structure
function show(pdb) {
  var structure = pv.io.pdb(pdb);
  viewer.cartoon('protein', structure, { color : color.ssSuccession() });
  viewer.centerOn(structure);
  // TODO find any ligands
  /*
      var ligands = structure.select({ rnames : ['SAH', 'RVP'] });
      viewer.ballsAndSticks('ligands', ligands);
      viewer.centerOn(structure);
  }); */
}


function loadPV() {
  var rq = new XMLHttpRequest();
  var pdbId='1r6a';
  rq.open("GET", 'http://files.rcsb.org/view/'+pdbId+'.pdb');

  rq.addEventListener("error",function(event) {alert('Sorry, unable to load that structure: '+event)})
  rq.addEventListener("load",function(event) {
    show(rq.responseText);
  });
  rq.send()

}

// load the methyl transferase once the DOM has finished loading. That's
// the earliest point the WebGL context is available.
document.addEventListener('DOMContentLoaded', loadPV);
</script>
</html>
